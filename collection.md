Коллекции
=========

- [Intro](#Intro)
- [Создание](#Создание)
  - [Глобальой коллекции](#Глобальой коллекции)
  - [Один ко многим](#Один ко многим)
  - [Многие ко многим](#Многие ко многим)


Intro
-----

Коллекция - представление набора записей в таблице БД в удобном для использования виде,
а именно - в виде массива объектов CObject.

Класс `aObjectCollection` реализует интерфейсы `ArrayAccess`, `Iterator`, `Countable`, -
т.е. можно использовать в циклах `foreach`, обращаться к элементам как в массиве (`$coll[$i]`),
применять ф-цию `count()`.

Коллекция реализует механизм `lazy loading`. Таким образом, элементы коллекции будут подгружаться только при
первом обращении к ней.

Также коллекции могут обеспечивать связи между объектами БД и деляться на два типа:
- Один ко многим: `CObjectSingleCollection`
- Многие ко многим: `CObjectMultiCollection`

Точнее говоря у коллекции может быть предопределена фильтрация по внешнему ключу,
что в дальнейшем может использоваться в качестве связи в обектах.


Создание
--------

- Унаследоваться от `CObjectSingleCollection` или `CObjectMultiCollection`
- Задать имя таблицы, с которой работаем (`protected $tableName`)
- Задать имя класса объектов, хранящихся в коллекции (`protected $itemClass`)
- Optional: Указать предустановленную фильтрацию по внешнему ключу (`protected $FKName`)

### Глобальой коллекции

Глобальная коллекция является общим случаем и предназначена для работы со всей таблицей.

Для создания требуется:
- Унаследоваться от `CObjectSingleCollection`
- Задать имя таблицы
- Задать имя класса элементов

Пример:

	class CUsersCollection extends CObjectSingleCollection
	{
		protected	$tableName	='dbt_users';
		protected	$itemClass	='CUser';
		protected	$FKName		=array(null,null);
	}


### Один ко многим

Создание с предустановленной фильтрацией по внешнему ключу при связи один ко многим:
- Унаследоваться от `CObjectSingleCollection`


### Многие ко многим

